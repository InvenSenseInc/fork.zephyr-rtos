<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>invn.algo.sw-integration - InvnAlgoAMLLib documentation: AML</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">invn.algo.sw-integration - InvnAlgoAMLLib documentation
   &#160;<span id="projectnumber">1.6.0</span>
   </div>
   <div id="projectbrief">Documentation on Algo AML Library.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group___a_m_l.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">AML</div>  </div>
</div><!--header-->
<div class="contents">

<p>AIR MOTION Library provides pointing from 6-axis sensor and additionally swipe motion recognition.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_invn_algo_a_m_l_input.html">InvnAlgoAMLInput</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">AML input structure (6-axis raw data sensor and click button)  <a href="struct_invn_algo_a_m_l_input.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_invn_algo_a_m_l_output.html">InvnAlgoAMLOutput</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">AML output structure (calibrated sensor offsets, pointing output, swipe gestures detected and quaternion)  <a href="struct_invn_algo_a_m_l_output.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_invn_algo_a_m_l_config.html">InvnAlgoAMLConfig</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">AML configuration structure (gain for X and Y axis, sensor offsets, sensor full scale range)  <a href="struct_invn_algo_a_m_l_config.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaec72a190eb0cc18dbacdd55fd53718d0"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_m_l.html#gaec72a190eb0cc18dbacdd55fd53718d0">invn_algo_aml_version</a> (void)</td></tr>
<tr class="memdesc:gaec72a190eb0cc18dbacdd55fd53718d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return library version x.y.z-suffix as a char array.  <a href="group___a_m_l.html#gaec72a190eb0cc18dbacdd55fd53718d0">More...</a><br /></td></tr>
<tr class="separator:gaec72a190eb0cc18dbacdd55fd53718d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac3e73b99ae1b6a4af9f74465f5001364"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_m_l.html#gac3e73b99ae1b6a4af9f74465f5001364">invn_algo_aml_init</a> (struct inv_imu_device *icm_device, const <a class="el" href="struct_invn_algo_a_m_l_config.html">InvnAlgoAMLConfig</a> *config)</td></tr>
<tr class="memdesc:gac3e73b99ae1b6a4af9f74465f5001364"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes algorithms with default parameters and reset states.  <a href="group___a_m_l.html#gac3e73b99ae1b6a4af9f74465f5001364">More...</a><br /></td></tr>
<tr class="separator:gac3e73b99ae1b6a4af9f74465f5001364"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga38cb82a253565a4ce2de5d98c4e3ea22"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_m_l.html#ga38cb82a253565a4ce2de5d98c4e3ea22">invn_algo_aml_process</a> (const <a class="el" href="struct_invn_algo_a_m_l_input.html">InvnAlgoAMLInput</a> *inputs, <a class="el" href="struct_invn_algo_a_m_l_output.html">InvnAlgoAMLOutput</a> *outputs)</td></tr>
<tr class="memdesc:ga38cb82a253565a4ce2de5d98c4e3ea22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs algorithm computation.  <a href="group___a_m_l.html#ga38cb82a253565a4ce2de5d98c4e3ea22">More...</a><br /></td></tr>
<tr class="separator:ga38cb82a253565a4ce2de5d98c4e3ea22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa28f06f6b26307fdb6b65112c71c8c11"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_m_l.html#gaa28f06f6b26307fdb6b65112c71c8c11">invn_algo_aml_reset_swipe_recognition</a> (void)</td></tr>
<tr class="memdesc:gaa28f06f6b26307fdb6b65112c71c8c11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs reset of swipes gesture recognition.  <a href="group___a_m_l.html#gaa28f06f6b26307fdb6b65112c71c8c11">More...</a><br /></td></tr>
<tr class="separator:gaa28f06f6b26307fdb6b65112c71c8c11"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>AIR MOTION Library provides pointing from 6-axis sensor and additionally swipe motion recognition. </p>
<dl class="section warning"><dt>Warning</dt><dd>Supported sampling frequency is [100 Hz]</dd></dl>
<h1><a class="anchor" id="INVN_ALGO_AML_INTRO"></a>
Introduction</h1>
<p>The Air Motion Library is a highly programmable API for managing mouse cursor motion from 3 axes gyroscope and 3 axes accelerometer. Embedded TDK proprietary algorithms are responsible for converting motion sensors data into delta X and delta Y pointer movements. The library is intended to be used in free space pointing devices to operate in-air point and click navigation, just like a classic 2D mouse will do on a desk. In addition to its pointing feature, Air Motion Library is also capable of swipe motion recognition: 'Up', 'Down', 'Left', 'Right', 'Clockwise' and 'CounterClockwise' swipes are currently supported.</p>
<h1><a class="anchor" id="INVN_ALGO_AML_REF"></a>
AIR MOTION Library sensors referential</h1>
<ul>
<li>When the device lies flat on its back, accelerometer must see +1G on Z axis </li>
<li>When the device lies on its right side, accelerometer must see +1G on Y axis </li>
<li>When the device is held vertically pointing down, accelerometer must see +1G on X axis </li>
<li>A clockwise rotation around the gyroscope X axis generates positive values </li>
<li>A clockwise rotation around the gyroscope Y axis generates positive values i.e. negative delta Y on screen (cursor moves to the top) </li>
<li>A clockwise rotation around the gyroscope Z axis generates positive values i.e. positive delta X on screen (cursor moves to the right)</li>
</ul>
<div class="image">
<img src="axis.png" alt=""/>
</div>
 <h1><a class="anchor" id="AML_API"></a>
API</h1>
<p>The AIR MOTION Library uses the following functions : </p><ul>
<li><a class="el" href="group___a_m_l.html#gac3e73b99ae1b6a4af9f74465f5001364" title="Initializes algorithms with default parameters and reset states.">invn_algo_aml_init()</a> : This function must be called for library initialization, each time processing (re)starts. </li>
<li><a class="el" href="group___a_m_l.html#ga38cb82a253565a4ce2de5d98c4e3ea22" title="Performs algorithm computation.">invn_algo_aml_process()</a> : This function must be called each time new sensors values are available. The library is designed to run at 100Hz. </li>
<li><a class="el" href="group___a_m_l.html#gaa28f06f6b26307fdb6b65112c71c8c11" title="Performs reset of swipes gesture recognition.">invn_algo_aml_reset_swipe_recognition()</a> : This function must be called to trigger each new swipe gesture detection.</li>
</ul>
<h1><a class="anchor" id="AML_CALIBRATION"></a>
Calibration</h1>
<p>Gyroscope offsets values can fluctuate over time depending on various parameters. The library supports a continuous calibration which computes gyroscope offsets values in real time.</p>
<p>Each time the <a class="el" href="group___a_m_l.html#ga38cb82a253565a4ce2de5d98c4e3ea22" title="Performs algorithm computation.">invn_algo_aml_process()</a> is called, gyroscope instant "staticness" is checked. If the device is considered static, new gyroscope offset values are computed. The remote can then be considered as calibrated. You can check '<a class="el" href="struct_invn_algo_a_m_l_output.html#ab99c586d62438afeba165c902813d605" title="Mask to specify status outputs.">InvnAlgoAMLOutput.status</a>' to track calibration status over time.</p>
<p>'<a class="el" href="struct_invn_algo_a_m_l_config.html#a08cf923495a65a0fdcc3a71347324001" title="Gyroscope full scale range [dps].">InvnAlgoAMLConfig.gyr_fsr</a>' parameter is used to calibrate motion algorithms. '<a class="el" href="struct_invn_algo_a_m_l_config.html#afb2e02ef3aeb889d83c27bbd34311d8c" title="Accelerometer full scale range [g].">InvnAlgoAMLConfig.acc_fsr</a>' parameter is used for roll-compensation feature.</p>
<h1><a class="anchor" id="AML_ROLLCOMPENSATION"></a>
RollCompensation</h1>
<p>The Air Motion Library embeds a roll-compensation algorithm along with its pointing feature. Roll-compensation allows user's movement to be reliably reproduced on the screen, independently from the device roll orientation.</p>
<h1><a class="anchor" id="AML_EASYCLICK"></a>
EasyClick</h1>
<p>This feature allows user to perform more accurate and stable mouse clicks for a better experience. On click press, the library will freeze the pointer (dX and dY null) to avoid undesired movement. During this period, if the device movement quantity is too important, the pointer will be released sooner. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gac3e73b99ae1b6a4af9f74465f5001364"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac3e73b99ae1b6a4af9f74465f5001364">&#9670;&nbsp;</a></span>invn_algo_aml_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t invn_algo_aml_init </td>
          <td>(</td>
          <td class="paramtype">struct inv_imu_device *&#160;</td>
          <td class="paramname"><em>icm_device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_invn_algo_a_m_l_config.html">InvnAlgoAMLConfig</a> *&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes algorithms with default parameters and reset states. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">icm_device</td><td>Invensense IMU device pointer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">config</td><td>algo configuration structure in <a class="el" href="struct_invn_algo_a_m_l_config.html" title="AML configuration structure (gain for X and Y axis, sensor offsets, sensor full scale range)">InvnAlgoAMLConfig</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>initialization success indicator. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">1</td><td>Fail </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga38cb82a253565a4ce2de5d98c4e3ea22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga38cb82a253565a4ce2de5d98c4e3ea22">&#9670;&nbsp;</a></span>invn_algo_aml_process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void invn_algo_aml_process </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_invn_algo_a_m_l_input.html">InvnAlgoAMLInput</a> *&#160;</td>
          <td class="paramname"><em>inputs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_invn_algo_a_m_l_output.html">InvnAlgoAMLOutput</a> *&#160;</td>
          <td class="paramname"><em>outputs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs algorithm computation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">inputs</td><td>algorithm input in <a class="el" href="struct_invn_algo_a_m_l_input.html" title="AML input structure (6-axis raw data sensor and click button)">InvnAlgoAMLInput</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">outputs</td><td>algorithm output. Output status reports updated outputs in <a class="el" href="struct_invn_algo_a_m_l_output.html" title="AML output structure (calibrated sensor offsets, pointing output, swipe gestures detected and quatern...">InvnAlgoAMLOutput</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaa28f06f6b26307fdb6b65112c71c8c11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa28f06f6b26307fdb6b65112c71c8c11">&#9670;&nbsp;</a></span>invn_algo_aml_reset_swipe_recognition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void invn_algo_aml_reset_swipe_recognition </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs reset of swipes gesture recognition. </p>
<p>Allows to restart gesture processing without resetting pointing. </p>

</div>
</div>
<a id="gaec72a190eb0cc18dbacdd55fd53718d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaec72a190eb0cc18dbacdd55fd53718d0">&#9670;&nbsp;</a></span>invn_algo_aml_version()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* invn_algo_aml_version </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return library version x.y.z-suffix as a char array. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">library</td><td>version a char array "x.y.z-suffix" </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Feb 1 2024 06:06:33 for invn.algo.sw-integration - InvnAlgoAMLLib documentation by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
